<div class="page-header">
  <h1>
    States
    <a href="/states/new" class="btn btn-lg btn-success"><i class="fa fa-plus"></i></a>
  </h1>
    <p>This displays all health insurance plans on healthcare.gov for each state that offers health insurance on healthcare.gov. Users can edit / add states; but cannot delete existing states.</p>
</div>

<div class="row">
<%= search_form_for @q do |f| %>
  <p class="lead">Narrow results by field:</p>

  <div class="form-group col-sm-4 col-sm-offset-4">
    <%= f.label :state_cont, " Select County:" %>
    <%= f.text_field :state_cont, :class => "form-control", :placeholder => "i.e. IL" %>
  </div>

  <%= f.submit :class => "btn btn-primary col-sm-4 col-sm-offset-4" %>

  <a href="/states" class="btn btn-default col-sm-4 col-sm-offset-4">Clear filters</a>
<% end %>
</div>

<hr>

<div class="row">
<%= paginate @states %>
</div>

<br>

<div class="row isotope-container col-sm-8 col-sm-offset-2">
<table class="table table-striped table-hover">
  <thead>
    <tr>

    <th>
      <%= content_tag :table do %>
        <%= content_tag :th, sort_link(@q, :state) %>
      <% end %>
    </th>

    <th>Number of Plans Offered in State:</th>
    <th></th>
    <th></th>
    </tr>
  </thead>

  <tbody>

    <% @states.each do |state| %>
    <tr>
      <td> <%= state.state%></td>
      <td> <%= state.plans.count %></td>
      <td>
        <a href="states/<%= state.id %>" class="btn btn_primary">
          <i class="fa fa-search-plus"></i>
        </a>
      </td>
      <td>
        <a href="states/<%= state.id %>/edit" class="btn btn-warning">
          <i class="fa fa-edit"></i>
        </a>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
</div>
